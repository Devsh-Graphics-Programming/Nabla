// Copyright (C) 2018-2020 - DevSH Graphics Programming Sp. z O.O.
// This file is part of the "Nabla Engine".
// For conditions of distribution and use, see copyright notice in nabla.h

#include "CBAWLegacy.h"

using namespace nbl;
using namespace asset;
using namespace legacyv0;

using namespace video;
namespace
{
    constexpr asset::E_FORMAT CTplusCPAtoEF[ECT_COUNT][ECPA_COUNT]
    {
        {EF_UNKNOWN, EF_R32_SFLOAT, EF_R32G32_SFLOAT, EF_R32G32B32_SFLOAT, EF_R32G32B32A32_SFLOAT},
        {EF_UNKNOWN, EF_R16_SFLOAT, EF_R16G16_SFLOAT, EF_R16G16B16_SFLOAT, EF_R16G16B16A16_SFLOAT},
        {EF_UNKNOWN, EF_R64_SFLOAT, EF_R64G64_SFLOAT, EF_R64G64B64_SFLOAT, EF_R64G64B64A64_SFLOAT},
        {EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_B10G11R11_UFLOAT_PACK32, EF_UNKNOWN},
        {EF_A2R10G10B10_SNORM_PACK32, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_A2B10G10R10_SNORM_PACK32},
        {EF_A2R10G10B10_UNORM_PACK32, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_A2B10G10R10_UNORM_PACK32},
        {EF_B8G8R8A8_SNORM, EF_R8_SNORM, EF_R8G8_SNORM, EF_R8G8B8_SNORM, EF_R8G8B8A8_SNORM},
        {EF_B8G8R8A8_UNORM, EF_R8_UNORM, EF_R8G8_UNORM, EF_R8G8B8_UNORM, EF_R8G8B8A8_UNORM},
        {EF_UNKNOWN, EF_R16_SNORM, EF_R16G16_SNORM, EF_R16G16B16_SNORM, EF_R16G16B16A16_SNORM},
        {EF_UNKNOWN, EF_R16_UNORM, EF_R16G16_UNORM, EF_R16G16B16_UNORM, EF_R16G16B16A16_UNORM},
        {EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN},
        {EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN},
        {EF_A2R10G10B10_SSCALED_PACK32, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_A2B10G10R10_SSCALED_PACK32},
        {EF_A2R10G10B10_USCALED_PACK32, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_A2B10G10R10_USCALED_PACK32},
        {EF_B8G8R8A8_SSCALED, EF_R8_SSCALED, EF_R8G8_SSCALED, EF_R8G8B8_SSCALED, EF_R8G8B8A8_SSCALED},
        {EF_B8G8R8A8_USCALED, EF_R8_USCALED, EF_R8G8_USCALED, EF_R8G8B8_USCALED, EF_R8G8B8A8_USCALED},
        {EF_UNKNOWN, EF_R16_SSCALED, EF_R16G16_SSCALED, EF_R16G16B16_SSCALED, EF_R16G16B16A16_SSCALED},
        {EF_UNKNOWN, EF_R16_USCALED, EF_R16G16_USCALED, EF_R16G16B16_USCALED, EF_R16G16B16A16_USCALED},
        {EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN},
        {EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN},
        {EF_A2R10G10B10_SINT_PACK32, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_A2B10G10R10_SINT_PACK32},
        {EF_A2R10G10B10_UINT_PACK32, EF_UNKNOWN, EF_UNKNOWN, EF_UNKNOWN, EF_A2B10G10R10_UINT_PACK32},
        {EF_B8G8R8A8_SINT, EF_R8_SINT, EF_R8G8_SINT, EF_R8G8B8_SINT, EF_R8G8B8A8_SINT},
        {EF_B8G8R8A8_UINT, EF_R8_UINT, EF_R8G8_UINT, EF_R8G8B8_UINT, EF_R8G8B8A8_UINT},
        {EF_UNKNOWN, EF_R16_SINT, EF_R16G16_SINT, EF_R16G16B16_SINT, EF_R16G16B16A16_SINT},
        {EF_UNKNOWN, EF_R16_UINT, EF_R16G16_UINT, EF_R16G16B16_UINT, EF_R16G16B16A16_UINT},
        {EF_UNKNOWN, EF_R32_SINT, EF_R32G32_SINT, EF_R32G32B32_SINT, EF_R32G32B32A32_SINT},
        {EF_UNKNOWN, EF_R32_UINT, EF_R32G32_UINT, EF_R32G32B32_UINT, EF_R32G32B32A32_UINT},
        {EF_UNKNOWN, EF_R64_SFLOAT, EF_R64G64_SFLOAT, EF_R64G64B64_SFLOAT, EF_R64G64B64A64_SFLOAT},
    };
}

namespace nbl 
{ 
	namespace asset		
	{ 
		namespace legacyv0
		{
			asset::E_FORMAT mapECT_plus_ECPA_onto_E_FORMAT(E_COMPONENT_TYPE _ct, E_COMPONENTS_PER_ATTRIBUTE _cpa)
			{
				if (_ct >= ECT_COUNT || _cpa >= ECPA_COUNT)
					return EF_UNKNOWN;
				return CTplusCPAtoEF[_ct][_cpa];
			}
		}

		namespace legacyv1
		{

		}

		namespace legacyv2
		{

		}
	}
}