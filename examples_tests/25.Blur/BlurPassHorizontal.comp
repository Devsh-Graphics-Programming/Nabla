#include "nbl/builtin/glsl/ext/CentralLimitBoxBlur/parameters.glsl"

#define _NBL_GLSL_EXT_BLUR_INPUT_SET_DEFINED_ 0
#define _NBL_GLSL_EXT_BLUR_INPUT_BINDING_DEFINED_ 0

layout (set = _NBL_GLSL_EXT_BLUR_INPUT_SET_DEFINED_, binding = _NBL_GLSL_EXT_BLUR_INPUT_BINDING_DEFINED_) uniform sampler2D in_image;
#define _NBL_GLSL_EXT_BLUR_INPUT_DESCRIPTOR_DEFINED_

float downscale(in vec2 tex_coords, in uint channel)
{
	return (texture(in_image, tex_coords)[channel] + textureOffset(in_image, tex_coords, ivec2(1, 0))[channel] + textureOffset(in_image, tex_coords, ivec2(0, 1))[channel]
			+ textureOffset(in_image, tex_coords, ivec2(1, 1))[channel]) / 4.f;
}

float nbl_glsl_ext_Blur_getPaddedData(in uvec3 coordinate, in uint channel)
{
	const uvec2 image_dims = nbl_glsl_ext_Blur_Parameters_t_getDimensions().xy;
	float data = 0.f;
	if (all(lessThan(coordinate.xy, image_dims)))
	{
		vec2 tex_coords = vec2(coordinate.xy) / vec2(image_dims);
		data = downscale(tex_coords, channel);
	}

	return data;
}
#define _NBL_GLSL_EXT_BLUR_GET_PADDED_DATA_DEFINED_

#include "nbl/builtin/glsl/ext/CentralLimitBoxBlur/default_compute_blur.comp"